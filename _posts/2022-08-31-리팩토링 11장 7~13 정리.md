---
layout: post
title:  "리팩토링 11장 7~13 정리"
author: "JJoo"
comments: true
tags: refactoring
---

> '리팩터링 2판 - 마틴 파울러'를 읽고 정리한 내용입니다. 

## 11-7. 세터 제거하기 

세터 메서드가 있다는 것은 필드가 수정될 수 있다는 뜻이다. 

세터 제거하기 리팩터링을 적용하는 상황은 두가지이다. 

1. 사람들이 무조건 접근자 메서드를 통해서만 필드를 다루려고 할 때
  - 세터를 제거해서 객체가 생성된 후에는 값이 바뀌면 안되도록 명시한다.
2. 클라이언트에서 생성 스크립트를 사용해서 객체를 생성할때 
  
  > 생성 스크립트란? 
  > 생성자를 호출한 후 일련의 세터를 호출하여 객체를 완성하는 형태의 코드를 말한다.

  해당 세터들은 처음 생성할 때만 호출되리라 가정하는 데 이런 경우에도 세터를 제거하여 의도를 분명히 하는 것이 좋다.
  
## 절차 

1. 설정해야 할 값을 생성자에서 받지 않는 다면 그 값을 받을 매개변수를 생성자에 추가 한다. (함수 선언 바꾸기) 그런 다음 생성자 안에서 적절한 세터를 호출한다. 

2. 생성자 밖에서 세터를 호출하는 곳을 찾아 제거하고, 대신 새로운 생성자를 사용하도록 한다. 하나 수정할 때마다 테스트 한다. 

( 갱선하려는 대상이 공유참조 객체라서 새로운 객체를 생성하는 방식으로는 세터 호출을 대체할 수 없다면 이 리팩토링을 취소한다. )

3. 세터 메서드를 인라인 한다. 가능하다면 해당 필드를 불변으로 만든다. 

4. 테스트 한다.



before

```javascript
class Person {
  get name() {return this._name;} 
  set name(arg) {this._name = arg;} 
  get id() {return this._id;} 
  set id(arg) {this._id = arg;}
}
const martin = new Person();
martin.name = "laura";
martin.id = "1234";
```

after 

```javascript
class Person {
  constructor(id, name){
    this.id = id;
    this._name = name;
  }
  get name() {return this._name;} 
  get id() {return this._id;} 
}
const martin = new Person("1234", "laura");
```

