---
layout: post
title:  "Node 객체-4 : 노드 변경 API"
author: "JJoo"
comments: true
tags: Javascript
---


> 인프런 웹브라우저 Javascript 강의를 들으면서 정리한 내용입니다. 


## 노드 변경 API 


### 노드 추가 

노드를 추가하기 해서는 추가할 엘리먼트를 먼저 생성해야 하는 데 이것은 document 객체의 기능이다.

- document.createElement(tagname)

: 엘리먼트 노드를 추가한다.

- document.createTextNode(data)

: 텍스트 노드를 추가한다. 

<br/><br/>

추가할 엘리먼트를 생성하면 아래 api를 사용하여 원하는 곳에 연결한다.

- appendChild(child)

: 노드의 마지막 자식으로 주어진 엘리먼트를 추가한다.

- insertBefore(newElement, referanceElement)

: `appendChild`와 동작방법은 같으나 두번째 인자로 엘리먼트를 전달했을 때 이것(두번째 인자로 넣은 그것) 앞에 엘리먼트가 추가된다. 


```html
<ul id="target">
	<li>HTML</li>
	<li>CSS</li>
</ul>
<input type="button" onclick="callAppendChild();" value="appendChild()" />
<input type="button" onclick="callInsertBefore();" value="insertBefore()" />
<script>
	function callAppendChild(){
		var target = document.getElementById('target');
		var li = document.createElement('li');
		var text = document.createTextNode('JavaScript');
		li.appendChild(text);
		target.appendChild(li);
	}
	// target에 id="target"를 할당한다.
	// li element node와  JavaScript라는 text node를 생성한다.
	// appendChild를 이용해 li에 위에서 만든 text node를 넣어주고 그 li를 target의 마지막 자식으로 넣어준다. 
	function callInsertBefore(){
		var target = document.getElementById('target');
		var li = document.createElement('li');
		var text = document.createTextNode('jQuery');
		li.appendChild(text);
		target.insertBefore(li, target.firstChild);
	}
	// li에 text node를 넣어주는 것까진 위와 같다. 
	// insertBefore를 이용해 두번째 인자로 넣어준 target.firstChild의 앞위치로 들어가서 
	// target의 첫번째 자식으로 li가 들어간다.
</script>
```


### 노드 삭제 

- removeChild(child)

: 노드를 삭제할때 사용한다. 이때 메소드는 삭제 대상의 부모 노드 객체를 실행해야 한다. 

```html
<ul>
	<li>HTML</li>
	<li>CSS</li>
	<li id="target">JavaScript</li>
</ul>
<input type="button" onclick="callRemoveChild();" value="removeChild()" />
<script>
	function callRemoveChild(){
		var target = document.getElementById('target');
		target.parentNode.removeChild(target);
	}
	//target을 삭제하려면 target의 부모노드를 찾아서 부모노드 객체에서 removeChild를 실행해야 한다. 
</script>
```


### 노드 변경 

- replaceChild(newChild, oldChild)

: 첫번째 인자로 변경'할' 엘리먼트, 두번째 인자로 변경'될' 엘리먼트를 넘겨준다.

```html
<ul>
	<li>HTML</li>
	<li>CSS</li>
	<li id="target">JavaScript</li>
</ul>
<input type="button" onclick="callReplaceChild();" value="replaceChild()" />
<script>
	function callReplaceChild(){
		var a = document.createElement('a');
		a.setAttribute('href', 'http://opentutorials.org/module/904/6701');
		a.appendChild(document.createTextNode('Web browser JavaScript'));
		var target = document.getElementById('target');
		target.replaceChild(a,target.firstChild);
	}
	// a 태그 를 만들어준다.
	// a 태그의 href 속성을 담아준다. 
	// a 태그에 Web browser JavaScript라는 text node를 넣어준다.
	// a = <a href="http://opentutorials.org/module/904/6701">Web browser JavaScript</a> 형태가 된다.
	// #target의 자식인 텍스트 노드 javascript를 위에서 만든 a 로 변경한다. 
</script>
```


### 문자열로 노드 제어 

위에서 살펴봤던 노드 제어 방식들은 복잡하고 장황하다.

문자열로 노드를 제어하면 좀 더 간단하게 노드를 제어할 수 있다. 


#### innerHTML

대상의 하위 엘리먼트(자식 엘리먼트)를 읽어올 수 있다. 

또 대상의 하위 엘리먼트를 만들거나 변경할 수 있다. 

```html
<body>
	<ul id="target">
		<li>HTML</li>
		<li>CSS</li>
	</ul>
	<input type="button" onclick="get();" value="get" />
	<input type="button" onclick="set();" value="set" />
	<script>
	function get(){
		var target = document.getElementById('target');
		alert(target.innerHTML);
	}
	// 결과
	// <li>HTML</li>
	// <li>CSS</li>

	function set(){
		var target = document.getElementById('target');
		target.innerHTML = "<li>JavaScript Core</li><li>BOM</li><li>DOM</li>";
	}
	// 결과
	// <li>JavaScript Core</li>
	// <li>BOM</li>
	// <li>DOM</li>
	</script>
</body>
```


#### outerHTML

자기자신을 포함한 자식 엘리먼트 모두를 대상으로 한다. 

```html
<body>
	<ul id="target">
		<li>HTML</li>
		<li>CSS</li>
	</ul>
	<input type="button" onclick="get();" value="get" />
	<input type="button" onclick="set();" value="set" />
	<script>
	function get(){
		var target = document.getElementById('target');
		alert(target.outerHTML);
	}
	// 결과 
	// <ul id="target">
	//    <li>HTML</li>
	//    <li>CSS</li>
	// </ul>

	function set(){
		var target = document.getElementById('target');
		target.outerHTML = "<ol><li>JavaScript Core</li><li>BOM</li><li>DOM</li></ol>";
	}
	// 결과 
	// <ol>
	//   <li>JavaScript Core</li>
	//   <li>BOM</li>
	//   <li>DOM</li>
	// </ol>
	</script>
</body>
```


#### innerText, outerText

`innerHtml`, `outerHTML`과 다르게 이 API들은 값을 읽을 때는 HTML 코드를 제외한 문자열만 리턴하고, 값을 변경할 때는 HTML의 코드를 그대로 문자열로 추가한다.

```html
<body>
	<ul id="target">
		<li>HTML</li>
		<li>CSS</li>
	</ul>
	<input type="button" onclick="get();" value="get" />
	<input type="button" onclick="set();" value="set" />
	<script>
		function get(){
			var target = document.getElementById('target');
			alert(target.innerText);
		}
		// 결과 
		// HTML
		// CSS

		function set(){
			var target = document.getElementById('target');
			target.innerText = "<li>JavaScript Core</li><li>BOM</li><li>DOM</li>";
		}
		// 결과 
		// <li>JavaScript Core</li><li>BOM</li><li>DOM</li>
	</script>
</body>
```


#### insertAdjacentHTML()

좀 더 정교하게 문자열을 이용해서 노드를 변경하고 싶을 때 사용한다.

첫번째 인자로 위치를 지정해주는 값을 넣어주고 두번째 인자로 넣어줄 엘리먼트를 넣어준다.

두번째 인자로 들어가는 엘리먼트는 텍스트로만 들어가는 것이 아니고 엘리먼트 형태로 들어간다. 

```html
<body>
//ⓐ
<ul id="target">
	//ⓑ
	<li>CSS</li>
	//ⓒ
</ul>
	//ⓓ
	<input type="button" onclick="beforebegin();" value="beforebegin" />
	<input type="button" onclick="afterbegin();" value="afterbegin" />
	<input type="button" onclick="beforeend();" value="beforeend" />
	<input type="button" onclick="afterend();" value="afterend" />
	<script>
		function beforebegin(){
			var target = document.getElementById('target');
			target.insertAdjacentHTML('beforebegin','<h1>Client Side</h1>');
		}
		//beforebegin
		// 타겟이 등장하기 전인 ⓐ에 위치한다. 
		function afterbegin(){
			var target = document.getElementById('target');
			target.insertAdjacentHTML('afterbegin','<li>HTML</li>');
		}
		//afterbegin
		// 타겟이 시작하는 지점인 첫번째 자식의 위치가 되는 ⓑ에 위치한다.
		function beforeend(){
			var target = document.getElementById('target');
			target.insertAdjacentHTML('beforeend','<li>JavaScript</li>');
		}
		// beforeend
		//타겟이 끝나기 직전인 ⓒ에 위치한다. 
		function afterend(){
			var target = document.getElementById('target');
			target.insertAdjacentHTML('afterend','<h1>Server Side</h1>');
		}
		//afterend
		//타겟이 끝나고 난 직 후 인 ⓓ에 위치한다. 
	</script>
</body>
```



